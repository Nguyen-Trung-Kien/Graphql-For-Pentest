# Graphql-For-Pentest
learning graphql for pentest
Graphql là ngôn ngữ truy vấn cho API và cho phép thực thi trên máy chủ để trả về kết quả tương ứng. Graphql không ràng buộc loại cơ sở dữ liệu hoặc công cụ lưu trữ cụ thể nào, thay vào đó được hỗ trợ bởi code và dữ liệu hiện có.
## Cấu trúc
Các Thành phần của graphql :
1. Operation Type
- Query: Sử dụng để lấy dữ liệu từ máy chủ
- Mutation: Sử dụng để sửa đổi dữ liệu trên máy chủ
- Subscription: Sử dụng để thiết lập kết nối thời gian thực để cập nhật dữ liệu
2. Operation Name
Tên do người dùng đặt
3. Selection Set
- Là các trường xác định yêu cầu dữ liệu cho việc truy vấn (tránh nạp dữ liệu quá nhiều)
- Mỗi trường đại diện cho một phần dữ liệu cần được truy xuất hoặc sửa đổi
- Các trường có thể có đối số để sử dụng cho việc lọc hoặc sắp xếp
- mặc định response key của các trường trong đối tượng phản hồi sẽ sử dụng tên của trường đó. Tuy nhiên cũng có thể xác định khoá phản hồi bằng cách chỉ định bí danh
4. Biến (Variables)
- các biến tuỳ chọn có thể được sử dụng để tham số hoá các Operation
- các biến cho phép tái sử dụng bằng cách cung cấp các giá trị khi thực hiện requests
![image](https://github.com/Nguyen-Trung-Kien/Graphql-For-Pentest/assets/65381453/68696d72-0f20-4364-9844-5ba16b2bb1f7)

Operation Type: Query -> lấy dữ liệu

Operation Name : GetBook tên người dùng đặt

Selection Set : Trường "book" chỉ định cách dữ liệu cần xem (title, author, publicationYear)

Variables (biến) : "$bookId" biến thuộc "ID!" (không null) sử dụng là đối số để tìm nạp một cuốn sách cụ thể 

arguments (đối số): id nhập vào để xác định book
5. Fragments (Phân đoạn):
- Các phân đoạn được sử dụng trong Graphql để giảm sự trùng lặp và sử dụng lại các lựa chọn trường phổ biến trong truy vấn
- Cho phép xác định một tập hợp các trường một lần và đưa vào nhiều truy vấn
- Sử dụng Fragments để làm cho các truy vấn ngắn gọn và dễ bảo trì hơn

![image](https://github.com/Nguyen-Trung-Kien/Graphql-For-Pentest/assets/65381453/1be0c61d-0c2d-4331-998c-575d40c66288)

## Schema
Schema được xem là bản thiết kế xác định hoạt động mà client có thể truy cập.

Schema xác định các loại và mối quan hệ trong graphql. Nó phát thảo các loại đối tượng và chỉ định cách các trường trong loại đó liên quan với nhau

ví dụ:
```
type Query {
  hello: String
  user(id: ID!): User
}

type User {
  id: ID!
  name: String!
  email: String!
}
```
Trong ví dụ này là Schema với 2 type là Query và User

type Query là điểm vào để seach dữ liệu từ máy chủ. Có 2 trường là hello và user
Trường hello trả về string
Trường User chấp nhận đối số id (không null) và trả về đối tượng User

type User xác định cấu trúc của đối tượng User . Có 3 trường là id, name, email.
Trường id thuộc loại ID! (không null và luôn phải có giá trị)
Trường name thuộc loại String! (không null và luôn có giá trị)

Với schema này có thể truy vấn về trường hello để nhận được chuỗi phản hồi hoặc sử dụng trường User có argument (đối số) id để truy xuất một đối tượng có id cụ thể với thông tin id, name, email
